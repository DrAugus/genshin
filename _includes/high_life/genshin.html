<p>原神相关的信息 目前只更新了角色up祈愿</p>

<!--长度减1-->
{% capture lenMonthList %}119{% endcapture %}
{% capture lenAllDays %}3649{% endcapture %}
<!--无法动态设置slider将该长度设置为5 其他填充为敬请期待-->
{% capture lenFuture %}4{% endcapture %}
{% capture lenCurrent %}99{% endcapture %}

{% capture lenElements %}6{% endcapture %}

<!--时间轴-->
<div class="col s12">
    <div class="timeline-scroll-x" id="setNowPos">

        <div class="timeline-month">
            {% for i in (0..lenMonthList) %}
            <div class="timeline-month-left-{{i}} hide">
                <div class="timeline-month-width-{{i}}"><span id="timelineMonthName{{i}}"></span></div>
            </div>
            {% endfor %}
        </div>

        <div class="timeline-day">

            <div class="timeline-today-line-pos" id="findNowPos" style="z-index: 2;">
                <div class="absolute" id="currentTime"></div>
            </div>

            <div class="timeline-wish" style="z-index: 3">
                <div style="position: absolute">

                    {% for wish in site.data.genshin-wish.characters %}

                    {% assign i = forloop.index0 %}

                    {% for characters in site.data.genshin-characters %}
                    {% if characters[1].id == wish.wish5star[0] %}

                    <!--颜色控制-->
                    {% assign eleColor = "#fff0" %}
                    {% for eleInfo in site.data.genshin-ele-color %}
                    {% if eleInfo[0] == characters[1].ele %}
                    {% assign eleColor = eleInfo[1] | prepend: '#' %}
                    {% break %}
                    {% endif %}
                    {% endfor %}
                    <!--颜色控制-->

                    <div class="card event-item event-item-{{i}} hide" style="background-color: {{eleColor}}">
                        <div class="card-image waves-effect waves-block waves-light " style="height: 128px">
                            <div class="event-img responsive-img activator"
                                 style="background-image: url('/assets/res/genshin-impact/characters/half/{{characters[1].id}}.png')">
                            </div>
                            <span class="left-align" style="font-size: 4rem; margin-left: 10px; color: white">
                                {{characters[1].name}}
                            </span>
                        </div>

                        <div class="card-reveal">
                            <span class="card-title" style="color: {{eleColor}}">
                                <i class="material-icons right">close</i>
                                {{wish.name}}-{{wish.shortName}}
                            </span>
                            <!--downcase转换小写 并用_替换空格 append其他标记-->
                            <img alt="" loading="lazy"
                                 src="/assets/res/genshin-impact/events/{{ wish.name | downcase | replace: ' ', '_' | append: '_' | append: wish.image | append: '.jpg'  }}">

                            <p style="color: {{eleColor}}"> {{characters[1].intro-content}}</p>

                            <button class="btn waves-effect waves-light" style="background-color: {{eleColor}}">
                                <i class="material-icons">share</i>
                            </button>
                            <a class="right" style="color:{{eleColor}}" href="#" target="_blank">官方信息:TODO接入href</a>
                        </div>

                    </div>

                    {% break %}
                    {% endif %}
                    {% endfor %}

                    {% endfor %}

                </div>
            </div>

            {% for i in (0..lenAllDays) %}
            <div class="timeline-wrapper left-day-{{i}} hide" style="z-index: -1">
                <div class="timeline-index"><span id="timelineDay{{i}}"></span></div>
            </div>
            {% endfor %}

        </div>
    </div>
</div>

<!--语音暂不显示-->
<div style="display: none">
    <div class="col s12">
        AUTOPLAY<p id="hutao-text"></p>
        <audio id="hutao-voice" controls="controls" autoplay="autoplay"></audio>
    </div>

    <div class="col s12">
        <details>
            <summary>展开所有语音</summary>
            <ul>
                {% for i in (0..6) %}
                <li><p id="hutao-text-{{i}}"></p>
                    <audio id="hutao-voice-{{i}}" controls="controls" preload="none"></audio>
                </li>
                {% endfor %}
            </ul>
        </details>
    </div>
</div>

<!--当前祈愿-->
<div class="col s12">

    <h2 id="noWishInfo"></h2>
    <div class="no-wish">

        <div class="row ">
            <h3 class="center">旅行者可以在活动祈愿中获得更多角色与武器，组建强大的队伍！</h3>
            <ul class="collapsible popout" data-collapsible="accordion">

                <li class="z-depth-2 hoverable radius5px">
                    <div class="collapsible-header">
                        祈愿倒计时：<span id="deadline"></span>
                    </div>
                    <div class="collapsible-body hide"></div>
                </li>
                <li class="z-depth-2 hoverable radius5px">
                    <div class="collapsible-header">
                        当前时间为：<span id="time_str"></span>
                    </div>
                    <div class="collapsible-body hide"></div>
                </li>
                <li class="z-depth-2 hoverable radius5px">
                    <div class="collapsible-header">
                        当前祈愿周期为：
                        <span id="timeStartCurrentCharacter"></span> ~ <span id="timeEndCurrentCharacter"></span>
                    </div>
                    <div class="collapsible-body hide"></div>
                </li>
            </ul>
        </div>

        <div class="slider">
            <ul class="slides">
                {% for i in (0..3) %}
                <li>
                    <img id="showCurrentWishCharacter{{i}}" loading="lazy">
                    <div class="caption left-align">
                        <h5 class="current-wish-color-{{i}}" id="currentCharacter{{i}}"></h5>
                        <h4 class="light current-wish-color-{{i}}" id="currentWishText{{i}}"></h4>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>


    </div>

</div>

<!--版本答案-->
<div class="row">
    <h2>版本答案 队伍推荐</h2>
    <ul class="collapsible popout" data-collapsible="accordion">
        {% for party in site.data.genshin-party-setup %}
        <li class="z-depth-2 hoverable radius5px">
            <div class="collapsible-header">
                <span>{{party.name}}</span>
            </div>

            <div class="collapsible-body">
                <p>
                    {% for i in (0..party.party.size) %}
                    <!--跳过最大的 index从0起 包含了size-->
                    {% if i >= party.party.size %}
                    {% break %}
                    {% endif %}
                    <span>{{party.party[i]}}<span class="chip">{{party.constellation[i]}}</span></span>
                    {% endfor %}
                </p>
                <p>{{party.party}}
                    {% if party.advantage != nil %}<br>优势：{{party.advantage}} {% endif %}
                    {% if party.disadvantage != nil %} <br>缺陷：{{party.disadvantage}} {% endif %}
                </p>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>

<!--即将发布-->
<div class="row">

    <h2>即将发布</h2>

    <span id="futureWishInfo"></span>
    <div class="future-wish">

        <div class="slider">
            <ul class="slides">
                {% for i in (0..lenFuture) %}
                <li class="future-wish-bg-color-{{i}}">
                    <img id="futureWishBG{{i}}" loading="lazy">

                    <div class="caption left-align">
                        <h4 class="light future-wish-color-{{i}}" id="futureWish{{i}}"></h4>
                        <h5 class="future-wish-color-{{i}} " id="futureWishText{{i}}"></h5>
                        <img class="z-depth-0 responsive-img" style="display: none" id="futureElements{{i}}"
                             loading="lazy">
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>


    </div>

</div>

<!--空行分割-->
<div class="col s12"> &nbsp;</div>

<h2>观月推荐</h2>

<div class="row">
    {% for artifacts in site.data.genshin-artifacts-collocation %}
    <div class="col s12 m6 l4 ">
        <div class="card ">
            <div class="card-image waves-effect waves-block waves-light hoverable">
                <img class="activator" src="/assets/res/genshin-impact/characters/half/{{artifacts[0]}}.png"
                     loading="lazy">
            </div>

            <div class="card-reveal">
                <span class="card-title">{{artifacts[1].name}}圣遗物</span>
                {% if artifacts[1].artifacts != "" %} 推荐：{{artifacts[1].artifacts}}<br>{% endif %}

                {% if artifacts[1].main.sands != nil or artifacts[1].main.goblet != nil
                or artifacts[1].main.circlet != nil %}
                主词条：沙漏【{{artifacts[1].main.sands}}】 杯子【{{artifacts[1].main.goblet}}】
                头【{{artifacts[1].main.circlet}}】<br>
                {% endif %}

                {% if artifacts[1].sub != "" %} 副词条：{{artifacts[1].sub}}<br>{% endif %}
                {% if artifacts[1].tips != nil %} TIPS：{{artifacts[1].tips}}<br>{% endif %}
            </div>

        </div>
    </div>
    {% endfor %}
</div>

<h2>全部角色</h2>
<div class="row">
    {% for characters in site.data.genshin-characters %}
    <div class="col s4 m3 l1">
        <div class="card radius10px">
            <!--设置背景时发现高度为0 增加 padding-bottom 即可显示-->
            <!--没有找到角色图片 用派蒙-->
            <div class="card-image waves-effect waves-block waves-light hoverable"
                 style="background-image: url('/assets/res/genshin-impact/characters/{{characters[1].id}}.png'),url('/assets/res/genshin-impact/characters/paimon_faq.png');
                 background-repeat: no-repeat;
                 background-position: center;
                 padding-bottom:100%;
                 border-radius:10px">
                <div style="width: 30%">
                    <img src="/assets/res/genshin-impact/elements/{{characters[1].ele}}.png" loading="lazy">
                </div>
            </div>


            {% for eleInfo in site.data.genshin-ele-color %}
            {% if eleInfo[0] == characters[1].ele %}
            <span class="activator center valign-wrapper" style="color:{{eleInfo[1]}}"> {{characters[1].name}}</span>
            {% break %}
            {% endif %}
            {% endfor %}


        </div>
    </div>
    {% endfor %}
</div>

<!--滚动版全部角色-->
<div class="row">
    <div class="carousel">
        {% for characters in site.data.genshin-characters %}
        {% if characters[0] == "shenhe" %}
        {% break %}
        {% endif %}
        <a class="carousel-item" href="#">
            <img src="/assets/res/genshin-impact/characters/full/{{characters[1].id}}.png">
        </a>
        {% endfor %}
    </div>
</div>

<div class="divider"></div>