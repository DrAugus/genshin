---
title:  lua自动化测试指南
layout: post
date:   '2021-11-24 11:15:22'
categories: 编程
tags: lua
excerpt: lua自动化测试指南
---

<h1>lua自动化测试指南</h1>

<h2>安装过程</h2>


<h3>windows子系统linux安装luarocks</h3>

<ol>
    <li>安装gcc</li>
    <li>sudo apt install lua5.1</li>
    <li>sudo apt install luarocks</li>
    <li>sudo apt install lua-busted</li>
    <li>安装pcre2，安装rapidjson（这两个可以直接copy dbproxy项目里的lua文件）</li>
    <li>安装完成</li>
</ol>

<h3>windows安装luarocks</h3>

<ol>
    <li>
        <a href="https://www.cnblogs.com/xulang/p/12535667.html" target="_blank">安装流程</a>
    </li>
    <li>
        安装完成后cmd运行<code>luarocks</code>看是否安装成功<br>
        <blockquote>找不到luarocks命令时，需要将图示四个文件copy放入<code>lua\5.1\</code>路径下<br>
            <img src="https://i.loli.net/2021/11/24/HaimyRg9jqLStwb.png">
        </blockquote>

    </li>
    <li>
        安装busted <code>luarocks install busted</code><br>
        <blockquote>
            <ul>
                <li>
                    如若出现<a href="https://github.com/Olivine-Labs/busted/issues/590" target="_blank">Error: Parse error
                    processing dependency 'lua_cliargs = 3.0'</a>，
                    请键入<code>where luarocks</code>查看路径是否为您的安装路径，此现象为您在设备上安装了多个版本的luarocks系统无法确定安装版本。
                </li>
                <li>如若出现 <code>'mingw32-gcc'不是内部或外部命令，也不是可运行的程序</code>
                    <img src="https://i.loli.net/2021/11/24/AjSJhNkOZ4FwKLY.png"><br>
                    <details>
                        <summary>您需要安装gcc</summary>
                        <ul>
                            <li>mingw下载安装（windows安装<a href="https://www.msys2.org/" target="_blank">指南</a>）</li>
                            <li>配置环境变量。
                                我的电脑->属性->高级系统设置->环境变量->系统变量<br>
                                系统变量->Path->编辑->新建->D:\mingw\bin->确定<br>
                                系统变量->新建->变量名：LIBRARY_path->变量值：D:\mingw\lib->确定<br>
                                系统变量->新建->变量名：C_INCLUDE_PATH->变量值：D:\mingw\include->确定<br>
                            <li>gcc -v验证安装</li>
                        </ul>
                    </details>
                </li>
            </ul>
        </blockquote>
    </li>

</ol>

